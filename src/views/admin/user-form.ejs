<%
  // Quy·∫øt ƒë·ªãnh 'action' c·ªßa form
  const formAction = `/admin/users/edit/${user.id}`;
%>

<form action="<%= formAction %>" method="POST" data-animate="fade-up">
  <input type="hidden" name="_csrf" value="<%= csrfToken %>"/>

  <div class="form-grid-2">
    
    <div class="form-col">
      <div class="form-group">
        <label for="full_name">H·ªç t√™n</label>
        <input type="text" id="full_name" name="full_name" 
               value="<%= user.full_name || '' %>">
      </div>
      
      <div class="form-group">
        <label for="phone">S·ªë ƒëi·ªán tho·∫°i</label>
        <input type="text" id="phone" name="phone" 
               value="<%= user.phone || '' %>">
      </div>
      
      <div class="form-group">
        <label for="dob">Ng√†y sinh</label>
        <input type="date" id="dob" name="dob" 
               value="<%= user.dob ? new Date(user.dob).toISOString().split('T')[0] : '' %>">
      </div>
      
      <div class="form-group">
        <label for="gender">Gi·ªõi t√≠nh</label>
        <select id="gender" name="gender">
          <option value="">‚Äî</option>
          <option value="Nam" <%= (user.gender === 'Nam') ? 'selected' : '' %>>Nam</option>
          <option value="N·ªØ" <%= (user.gender === 'N·ªØ') ? 'selected' : '' %>>N·ªØ</option>
        </select>
      </div>
    </div>

    <div class="form-col">
      <div class="form-group">
        <label for="email">Email (Kh√¥ng th·ªÉ thay ƒë·ªïi)</label>
        <input type="email" id="email" name="email" 
               value="<%= user.email %>" disabled>
      </div>
      
      <div class="form-group">
        <label for="username">Username (Kh√¥ng th·ªÉ thay ƒë·ªïi)</label>
        <input type="text" id="username" name="username" 
               value="<%= user.username %>" disabled>
      </div>
      
      <div class="form-group">
        <label for="role">Quy·ªÅn h·∫°n (Role)</label>
        <select id="role" name="role">
          <option value="customer" <%= (user.role === 'customer') ? 'selected' : '' %>>
            Customer (Kh√°ch h√†ng)
          </option>
          <option value="admin" <%= (user.role === 'admin') ? 'selected' : '' %>>
            Admin (Qu·∫£n tr·ªã vi√™n)
          </option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="is_active">Tr·∫°ng th√°i</Labe>
        <select id="is_active" name="is_active">
          <option value="true" <%= (user.is_active === true) ? 'selected' : '' %>>
            üü¢ Ho·∫°t ƒë·ªông (Active)
          </option>
          <option value="false" <%= (user.is_active === false) ? 'selected' : '' %>>
            üî¥ ƒê√£ kh√≥a (Inactive)
          </option>
        </select>
      </div>
      
    </div>
  </div>
  
  <div class="form-actions">
    <a href="/admin/users" class="btn btn-outline">
      Tr·ªü v·ªÅ danh s√°ch
    </a>
    <button type="submit" class="btn btn-primary">
      C·∫≠p nh·∫≠t ng∆∞·ªùi d√πng
    </button>
  </div>
</form>


<style>
  .form-grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
  }

  .form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 0.75rem;
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border);
  }
  
  /* C√°c style .form-group, input, select ƒë√£ c√≥ trong admin.css */
  .form-group input:disabled {
    background: var(--blue-100);
    color: var(--muted);
    cursor: not-allowed;
  }
  .theme-dark .form-group input:disabled {
     background: rgba(0,0,0,0.2);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .form-grid-2 {
      grid-template-columns: 1fr; /* X·∫øp ch·ªìng */
    }
  }
</style>