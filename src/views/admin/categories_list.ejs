<div class="admin-topbar">
  <div class="left">
    <strong>üìÇ Qu·∫£n l√Ω danh m·ª•c</strong>
  </div>
  <div class="right">
    <a href="/admin/categories/new" class="btn btn-primary">‚ûï Th√™m danh m·ª•c</a>
  </div>
  </div>

<div class="toolbar" data-animate="fade-up" data-delay="100" style="margin-top:1rem">
  <form method="get" class="admin-form-inline">
    <input type="text" name="q" placeholder="T√¨m t√™n, slug..." 
           value="<%= q || '' %>" class="input-q"/>
    <button class="btn btn-outline">T√¨m ki·∫øm</button>
  </form>
</div>

<div class="glass-box table-wrap" data-animate="fade-up" data-delay="150">
  <% if (!cats.length) { %>
    <div class="empty-state">
      <img src="/public/img/placeholder.png" alt="Empty"/>
      <p>Ch∆∞a c√≥ danh m·ª•c n√†o. H√£y b·∫Øt ƒë·∫ßu b·∫±ng vi·ªác t·∫°o danh m·ª•c m·ªõi.</p>
      <a href="/admin/categories/new" class="btn btn-primary">‚ûï Th√™m danh m·ª•c</a>
    </div>
  <% } else { %>
    <table class="admin-table">
      <thead>
        <tr>
          <th>T√™n danh m·ª•c</th>
          <th>Slug</th>
          <th>Tr·∫°ng th√°i</th>
          <th>S·∫£n ph·∫©m</th>
          <th style="width:220px">H√†nh ƒë·ªông</th>
        </tr>
      </thead>
      <tbody>
        <% cats.forEach((c, i) => { %>
          <tr data-animate="fade-up" data-delay="<%= i * 50 %>">
            <td><strong><%= c.name %></strong></td>
            <td><%= c.slug %></td>
            <td>
              <% if (c.is_active) { %>
                <span class="status-badge active">Ho·∫°t ƒë·ªông</span>
              <% } else { %>
                <span class="status-badge inactive">ƒê√£ ·∫©n</span>
              <% } %>
            </td>
            <td><%= c.product_count || 0 %></td>
            <td>
              <span class="row-actions">
                <a href="/admin/categories/edit/<%= c.id %>" class="btn btn-outline small">‚úèÔ∏è S·ª≠a</a>
                <% if (c.is_active) { %>
                  <form action="/admin/categories/hide/<%= c.id %>" method="post" class="inline">
                    <input type="hidden" name="_csrf" value="<%= csrfToken %>"/>
                    <button class="btn btn-outline small">·∫®n</button>
                  </form>
                <% } else { %>
                  <form action="/admin/categories/unhide/<%= c.id %>" method="post" class="inline">
                    <input type="hidden" name="_csrf" value="<%= csrfToken %>"/>
                    <button class="btn btn-outline small">Hi·ªán</button>
                  </form>
                <% } %>

                <form action="/admin/categories/delete/<%= c.id %>" method="post" class="inline"
                      onsubmit="return confirm('X√≥a vƒ©nh vi·ªÖn danh m·ª•c? H√†nh ƒë·ªông kh√¥ng th·ªÉ ho√†n t√°c.');">
                  <input type="hidden" name="_csrf" value="<%= csrfToken %>"/>
                  <button class="btn btn-danger small">üóë X√≥a</button>
                </form>
              </span>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } %>
</div>

<% if (pages && pages > 1) { %>
  <div class="pagination" data-animate="fade-up" data-delay="250">
    <% for (let i = 1; i <= pages; i++) { %>
      <a href="?q=<%= q %>&page=<%= i %>" class="page-link <%= i === page ? 'active' : '' %>"><%= i %></a>
    <% } %>
  </div>
<% } %>
